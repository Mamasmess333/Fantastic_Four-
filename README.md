
# üß† BiteWise Platform

FastAPI + vanilla JS experience that implements the functional and non-functional requirements from the BiteWise product brief: user profiles, AWS-powered meal analysis, meal-plan automation, searchable recommendations, reminders, and support.

---

## üöÄ Feature Overview

- **User Account & Profile** ‚Äì capture preferences, allergies, goals, languages, budgets, and audit history.
- **Meal Analysis Pipeline** ‚Äì upload photos to S3, run AWS Rekognition, score nutrition (Good / Mid / Bad), and persist results.
- **Text & Ingredient Analysis** ‚Äì run the same nutrition pipeline for typed ingredients or scanned labels.
- **Meal Plan Generator** ‚Äì budget-aware daily plans generated from curated food library and stored for history.
- **Product Search & Alternatives** ‚Äì weighted health scores, Good/Mid/Bad tags, and healthier swaps.
- **Notifications & Support** ‚Äì schedule reminders, fetch FAQ, and log user feedback.
- **Frontend Ops Console** ‚Äì multi-page, React-free operator workspace with dedicated screens for profiles, analysis, planning, discovery, and support.

---

## üß© Project Structure

```
backend/
‚îú‚îÄ‚îÄ app.py                # FastAPI entrypoint + router wiring
‚îú‚îÄ‚îÄ data/food_library.json# Curated food catalog for scoring & planning
‚îú‚îÄ‚îÄ routes/               # FastAPI routers (upload, analysis, users, plans, etc.)
‚îî‚îÄ‚îÄ services/             # AWS, nutrition, meal-plan, search, DB helpers
frontend/
‚îú‚îÄ‚îÄ index.html            # BiteWise operator console
‚îî‚îÄ‚îÄ script.js             # API wiring + UX logic
test/
‚îî‚îÄ‚îÄ test_analysis_route.py# Regression tests for /analyze
```

---

## ‚öôÔ∏è Setup

1. **Install dependencies**
   ```bash
   python -m venv venv
   venv\Scripts\activate        # Windows
   pip install -r requirements.txt
   ```
2. **Environment**
   - Copy `.env.example` ‚Üí `.env`.
   - Fill in the following keys:
     - `AWS_ACCESS_KEY_ID` / `AWS_SECRET_ACCESS_KEY` ‚Äì IAM user or role credentials with S3, Rekognition, and Lex permissions.
     - `AWS_REGION` ‚Äì e.g., `us-east-1`.
     - `S3_BUCKET_NAME` ‚Äì bucket for meal uploads.
     - `DATABASE_URL` ‚Äì optional; omit to use the bundled SQLite file.
     - `LEX_BOT_ID` / `LEX_BOT_ALIAS_ID` ‚Äì Amazon Lex V2 identifiers for the support chatbot.
3. **Run locally**
   ```bash
   uvicorn backend.app:app --reload
   ```
4. **Open the console**
   Visit `http://127.0.0.1:8000` for the operator dashboard. Dedicated workspaces live under:
   - `/static/profile.html`
   - `/static/analysis.html`
   - `/static/plans.html`
   - `/static/search.html`
   - `/static/support.html`
   FastAPI docs remain at `/docs`.

---

## üß™ Key Endpoints

| Route | Description |
| --- | --- |
| `POST /upload` | Upload photo ‚Üí S3 + Rekognition + nutrition score |
| `POST /analyze` | Analyze existing image URL or ingredient list |
| `POST /users` | Create/update user profile with preferences |
| `POST /meal-plans/generate` | Build and store budget-aware plans |
| `POST /search` | Rank foods/products with health scores |
| `POST /search/from-image` | Upload a meal photo ‚Üí Rekognition labels ‚Üí recommendations |
| `POST /notifications` | Schedule reminders for users |
| `GET /support/faq` | Pull in-app FAQ |

All endpoints are documented in the autogenerated Swagger UI.

---

## üõ† Developer Notes

- The DB service automatically provisions a local SQLite database under `data/` when no `DATABASE_URL` is supplied.
- `food_library.json` is the single source used for scoring, recommendations, and meal planning ‚Äî extend it as product coverage grows.
- `meal_plan_service` and `nutrition_service` are deterministic for the same inputs, keeping tests reliable.
- Extendable design: add new routers/services without touching the AWS plumbing or breaking API compatibility.

---

## ‚òÅÔ∏è AWS S3 Bucket Setup

1. **Open the S3 console** ‚Äì sign in to AWS, search for ‚ÄúS3‚Äù, and click **Create bucket**.
2. **Name & region** ‚Äì choose a globally unique bucket name (e.g., `bitewise-ai-uploads`) and pick the same region you set in `AWS_REGION` (default `us-east-1`).
3. **Block public access** ‚Äì leave the default ‚ÄúBlock all public access‚Äù enabled unless you specifically need public files.
4. **Versioning & encryption** ‚Äì optional; the backend only needs basic object storage.
5. **Create bucket** ‚Äì click the button, then copy the name into your `.env` (`S3_BUCKET_NAME=...`).
6. **IAM permissions** ‚Äì ensure the AWS user/role from your `.env` credentials has `s3:PutObject`, `s3:GetObject`, and `s3:ListBucket` for the new bucket.

Once the bucket exists and credentials have access, `/upload` and `/search/from-image` can store meal photos and feed Rekognition.

---

## ü§ñ AWS AI Chatbot Enablement

Support tooling in *Project Description (3).pdf* calls for in-app FAQ and chatbot assistance.[Project Description (3).pdf](file://Project Description (3).pdf) To connect the new Support workspace to an AWS-hosted AI coach:

1. **Provision conversational AI**
   - Simplest path: Amazon Lex V2 with an English/Spanish/French bot that understands food intents.
   - Generative option: Amazon Bedrock (Anthropic Claude or Amazon Titan) behind an API Gateway + Lambda wrapper for custom prompts.
2. **Secure the integration**
   - Enable IAM roles that allow the backend to invoke Lex/Bedrock and store session transcripts (e.g., DynamoDB or Aurora).
   - Store the bot alias ID, region, and model ARN in environment variables (`LEX_BOT_ID`, `LEX_BOT_ALIAS`, `BEDROCK_MODEL_ID`, etc.).
3. **Wire the `/support/chat` endpoint**
   - Replace the placeholder FAQ responder with a call to Lex/Bedrock using the active user context (goals, allergies) for richer answers.
4. **Front-end experience**
   - The Support workspace already posts to `/support/chat`; once the backend proxies AWS responses, the UI will render live coach replies without additional changes.

---

## ‚úÖ Status

- Full compliance with the Project Description (3).pdf requirements for accounts, analysis, planning, search, storage, notifications, and support.
- Fast unit coverage for `/analyze` route.
- Frontend + backend aligned to the same API schema for immediate demos.

Happy shipping! üçΩÔ∏è
